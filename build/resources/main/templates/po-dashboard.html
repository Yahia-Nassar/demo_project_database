<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<h1>PO Dashboard</h1>

<a href="/profile">My Profile</a>
<a href="/board/sprint">View Sprint Board</a>
<a href="/reports/estimates">Estimate Report</a>
<a href="/notifications">Notifications</a>

<h2>Backlog</h2>
<ul>
    <li th:each="s : ${backlog}">

        <b th:text="${s.title}"></b>
        <a th:href="@{/stories/{id}/edit(id=${s.id})}">Edit</a>

        <!-- Assign developers -->
        <a th:href="@{/stories/{id}/assign(id=${s.id})}">
            Assign developers
        </a>

        <!-- Move to Sprint -->
        <form th:action="@{/stories/{id}/sprint(id=${s.id})}"
              method="post"
              style="display:inline">
            <button type="submit">Move to Sprint</button>
        </form>

        <!-- Developers for this story -->
        <ul>
            <li th:each="dev : ${s.developers}">
                <span th:text="${dev.email}"></span>

                <form th:action="@{/stories/{sid}/remove-dev/{uid}(sid=${s.id},uid=${dev.id})}"
                      method="post"
                      style="display:inline">
                    <button type="submit">Remove</button>
                </form>
            </li>
        </ul>

    </li>
</ul>


<h2>Sprint</h2>
<ul th:each="s : ${sprint}">
    <li th:text="${s.title}"></li>

    <ul>
        <li th:each="t : ${s.tasks}">
            <span th:text="${t.title}"></span>
            (<span th:text="${t.status}"></span>)
        </li>
    </ul>
</ul>


</body>
</html>
